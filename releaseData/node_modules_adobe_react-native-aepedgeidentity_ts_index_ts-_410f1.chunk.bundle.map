{"version":3,"file":"node_modules_adobe_react-native-aepedgeidentity_ts_index_ts-_410f1.chunk.bundle","mappings":"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","sources":["webpack:///./node_modules/@adobe/react-native-aepedgeidentity/ts/Identity.ts","webpack:///./node_modules/@adobe/react-native-aepedgeidentity/ts/index.ts","webpack:///./node_modules/@adobe/react-native-aepedgeidentity/ts/models/AuthenticatedState.ts","webpack:///./node_modules/@adobe/react-native-aepedgeidentity/ts/models/IdentityItem.ts","webpack:///./node_modules/@adobe/react-native-aepedgeidentity/ts/models/IdentityMap.ts","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"],"sourcesContent":["/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport { NativeModules } from 'react-native';\nimport IdentityMap from './models/IdentityMap';\nimport IdentityItem from './models/IdentityItem';\n\ninterface IIdentity {\n  extensionVersion: () => Promise<string>;\n  getExperienceCloudId: () => Promise<string>;\n  getIdentities: () => Promise<IdentityMap>;\n  getUrlVariables: () => Promise<string>;\n  updateIdentities: (identityMap: IdentityMap) => void;\n  removeIdentity: (item: IdentityItem, namespace: string) => void;\n\n}\n\nconst RCTAEPEdgeIdentity: IIdentity = NativeModules.AEPEdgeIdentity;\n\nconst Identity: IIdentity = {\n  /**\n   * Returns the version of the Identity extension\n   * @return  {string} Promise a promise that resolves with the extension version\n   */\n  extensionVersion(): Promise<string> {\n    return Promise.resolve(RCTAEPEdgeIdentity.extensionVersion());\n  },\n\n  /**\n   * @brief Returns the Experience Cloud ID.\n   *\n   * Returns the Experience Cloud ID. An empty string is returned if the Experience Cloud ID was previously cleared.\n   *\n   * @return promise method which will be invoked once the Experience Cloud ID is available or rejected if an unexpected error occurred or the request timed out.\n   */\n  getExperienceCloudId(): Promise<string> {\n    const getExperienceCloudIdPromise = new Promise<string>((resolve, reject) => {\n      RCTAEPEdgeIdentity.getExperienceCloudId()\n        .then((experienceId) => {\n          resolve(experienceId);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n    return getExperienceCloudIdPromise;\n  },\n\n  /**\n   * @brief Returns all identifiers, including customer identifiers which were previously added.\n   *\n   * If there are no identifiers stored in the `Identity` extension, then an empty `IdentityMap` is returned.\n   *\n   * @return promise method which will be invoked once the identifiers are available or rejected if an unexpected error occurred or the request timed out.\n   */\n\n  getIdentities(): Promise<IdentityMap> {\n    const getIdentitiesPromise = new Promise<IdentityMap>((resolve, reject) => {\n      RCTAEPEdgeIdentity.getIdentities()\n        .then((identities) => {\n          let identityMap = toIdentityMap(identities);\n          resolve(identityMap);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n    return getIdentitiesPromise;\n  },\n\n   /**\n   * @brief Returns the identifiers in a URL's query parameters for consumption in hybrid mobile applications.\n   *\n   * There is no leading &amp; or ? punctuation as the caller is responsible for placing the variables in their resulting URL in the correct locations.\n   * \n   * @return promise method which will be invoked once the URL Variables are available or rejected if an unexpected error occurred or the request timed out.\n   */\n  getUrlVariables(): Promise<string> {\n    const getUrlVariablesPromise = new Promise<string>((resolve, reject) => {\n      RCTAEPEdgeIdentity.getUrlVariables()\n        .then((urlVariables) => {\n          resolve(urlVariables);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n    return getUrlVariablesPromise;\n  },\n\n  /**\n   * @brief Updates the currently known `IdentityMap` within the SDK.\n   *\n   * The Identity extension will merge the received identifiers with the previously saved one in an additive manner, no identifiers will be removed using this API.\n   * Identifiers which have an empty  `id` or empty `namespace` are not allowed and are ignored.\n   *\n   *\n   */\n   updateIdentities(identityMap: IdentityMap) {\n    RCTAEPEdgeIdentity.updateIdentities(identityMap);\n  },\n\n  /**\n   * @brief Removes the provided identity item from the stored client-side `IdentityMap`. The Identity extension will stop sending this identifier.\n   *\n   * This does not clear the identifier from the User Profile Graph.\n   * - Parameters:\n   *  - item: The identity item to remove.\n   *  - withNamespace: The namespace of the Identity to remove.\n   */\n  removeIdentity(item: IdentityItem, namespace: string) {\n    RCTAEPEdgeIdentity.removeIdentity(item, namespace);\n  }\n};\n\nfunction toIdentityMap(idObj: IdentityMap) {\n  var idMap = new IdentityMap();\n\n  for (const [key, value] of Object.entries(idObj)) {\n    value.forEach(function(item: IdentityItem) {\n      var identityItem = new IdentityItem(\n        item.id,\n        item.authenticatedState,\n        item.primary\n      );\n      idMap.addItem(identityItem, key);\n    });\n  }\n\n  return idMap;\n}\n\nexport default Identity;\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport { AuthenticatedState } from './models/AuthenticatedState';\nimport IdentityItem from './models/IdentityItem';\nimport IdentityMap from './models/IdentityMap';\nimport Identity from './Identity';\n\nexport {\n  // Native models\n  AuthenticatedState,\n  IdentityItem,\n  IdentityMap,\n  // Native modules\n  Identity\n};\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nexport enum AuthenticatedState {\n  AUTHENTICATED = 'authenticated',\n  LOGGED_OUT = 'loggedOut',\n  AMBIGUOUS = 'ambiguous'\n}\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport { AuthenticatedState } from './AuthenticatedState';\n\nclass IdentityItem {\n  id: string;\n  authenticatedState: AuthenticatedState;\n  primary: boolean;\n\n  constructor(\n    id: string,\n    authenticatedState = AuthenticatedState.AMBIGUOUS,\n    primary: boolean = false\n  ) {\n    this.id = id;\n    this.authenticatedState = authenticatedState;\n    this.primary = primary;\n  }\n}\n\nexport default IdentityItem;\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport IdentityItem from './IdentityItem';\n\nclass IdentityMap {\n  identityMap: Record<string, Array<IdentityItem>> = {};\n\n  /**\n   * Adds an `IdentityItem` to this `IdentityMap`\n   */\n  addItem(item: IdentityItem, namespace: string) {\n    if (item == null || !namespace) {\n      return;\n    }\n    if (!item.id || item.id.length === 0) {\n      return;\n    }\n\n    let itemCopy = copyItem(item);\n    // add item to the existing namespace\n    if (this.identityMap[namespace] !== undefined) {\n      var index = this.identityMap[namespace].findIndex((e) =>\n        equalIds(e.id, itemCopy.id)\n      );\n      if (index !== -1) {\n        this.identityMap[namespace][index] = itemCopy;\n      } else {\n        this.identityMap[namespace].push(itemCopy);\n      }\n    } else {\n      // creates new list with the item in it\n      this.identityMap[namespace] = [itemCopy];\n    }\n  }\n\n  /**\n   * Checks if this `IdentityMap` is empty\n   */\n  isEmpty() {\n    return !Object.keys(this.identityMap).length;\n  }\n\n  /**\n   * Gets a list of all namespaces available in this `IdentityMap`\n   */\n  getNamespaces() {\n    return Object.keys(this.identityMap);\n  }\n\n  /**\n   * Retrieves the IdentityItems for a given namespace\n   */\n  getIdentityItemsForNamespace(namespace: string): Array<IdentityItem> {\n    return Object.assign([], this.identityMap[namespace]);\n  }\n\n  /**\n   * Removes the provided `IdentityItem` for a namespace from the `IdentityMap`\n   */\n  removeItem(item: IdentityItem, namespace: string) {\n    if (item == null || !namespace) {\n      return;\n    }\n\n    if (!item.id || item.id.length === 0) {\n      return;\n    }\n\n    // remove item from the existing namespace\n    if (this.identityMap[namespace] !== undefined) {\n      var list = this.identityMap[namespace].filter(\n        (e) => !equalIds(e.id, item.id)\n      );\n      if (list.length == 0) {\n        delete this.identityMap[namespace];\n      } else {\n        this.identityMap[namespace] = list;\n      }\n    }\n  }\n}\n\nfunction equalIds(id1: string, id2: string): boolean {\n  return id1.toLowerCase() === id2.toLowerCase();\n}\n\nfunction copyItem(item: IdentityItem): IdentityItem {\n  var clonedItem = new IdentityItem(\n    item.id,\n    item.authenticatedState,\n    item.primary\n  );\n  return clonedItem;\n}\n\nexport default IdentityMap;\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["_reactNative","require","_IdentityMap","_interopRequireDefault","_IdentityItem","RCTAEPEdgeIdentity","NativeModules","AEPEdgeIdentity","Identity","extensionVersion","Promise","resolve","getExperienceCloudId","getExperienceCloudIdPromise","reject","then","experienceId","catch","error","getIdentities","getIdentitiesPromise","identities","identityMap","toIdentityMap","getUrlVariables","getUrlVariablesPromise","urlVariables","updateIdentities","removeIdentity","item","namespace","idObj","idMap","IdentityMap","_loop","key","value","forEach","identityItem","IdentityItem","id","authenticatedState","primary","addItem","_ref","Object","entries","_ref2","_slicedToArray2","default","_default","exports","_AuthenticatedState","_Identity","AuthenticatedState","_createClass2","arguments","length","undefined","AMBIGUOUS","_classCallCheck2","_defineProperty2","itemCopy","copyItem","index","findIndex","e","equalIds","push","isEmpty","keys","getNamespaces","getIdentityItemsForNamespace","assign","removeItem","list","filter","id1","id2","toLowerCase","clonedItem","obj","__esModule","module","_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_arr","_n","_d","_s","_e","call","next","done","err"],"sourceRoot":""}